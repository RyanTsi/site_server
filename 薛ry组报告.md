---
title: 基于Android的爱豆商城APP
author:
  - 薛若雨(2112190308)
  - 姚若兰(2112190328)
  - 夏紫微(2110020210)
description: |
  我们开发了一个基于Android的爱豆商城APP，
  前端采用Android，后端采用SpringBoot框架，
  实现了登录注册、展示商品、展示个人信息、添加删除购物车等功能
---
# 一、项目介绍 [薛若雨，姚若兰，夏紫微]

## 1.1 背景

随着娱乐产业的发展，偶像文化在全球范围内迅速兴起。偶像的粉丝群体是一个庞大而活跃的社群，他们愿意为了支持自己喜爱的偶像而购买相关的产品。这种粉丝经济的崛起催生了许多与偶像相关的商业项目，包括偶像周边商品的销售。

爱豆商城App是一个在线购物平台，专门为粉丝提供其偶像相关的商品。为偶像和相关品牌提供了一个直接连接粉丝并进行商品销售的渠道。通过APP粉丝可以方便地浏览和购买偶像相关的商品，并且不受限于地理位置。同时这个APP可以将偶像的相关产品集中在一个平台上，便于粉丝们寻找他们想要的商品。

总的来说，爱豆商城APP为偶像的粉丝们提供了更便捷、愉快的购物形式，同时也为偶像和品牌提供了一个更直接的销售渠道。

## 1.2 项目需求分析
![image](image1.jpg)
### 1.注册登录
- 用户注册: 提供用户注册的功能，用户需要填写手机号码等信息，并设置密码进行注册。
- 用户登录: 提供用户登录的功能，用户可以使用注册时填写的手机号码密码登录账户。

### 2.首页
- 轮播广告: 在首页顶部展示轮播广告，包括最新产品、活动等，吸引用户点击进入相关页面。
- 新品周边模块: 展示最新上架的商品图片和价格，让用户第一时间了解新品。
- 活动模块: 展示当前进行中的活动信息。

### 3.商城
- 商品展示: 在商城页面按照分类展示偶像商品的信息，包括偶像周边、-专辑、演唱会门票等，吸引用户浏览和选择。
- 商品搜索: 提供搜索框和筛选功能，让用户可以快速搜索和找到感兴趣的商品。
- 商品详情页: 每个商品有详细的介绍、图片展示、价格、销量、库存信息等，用户可以全面了解商品信息。
- 加入购物车: 用户可以将感兴趣的商品添加到购物车中，方便统一结算和管理。
- 商品评论: 用户可以查看其他购买过的用户对此商品的评价，有助于用户全面了解商品。
- 店铺信息：用户可以查看此商品所属的店铺信息。

### 4.购物车
- 购物车的商品信息: 展示购物车中每个商品的名称、价格、数量、小计金额等信息。
- 修改商品数量: 用户可以在购物车页面修改商品的购买数量，系统会实时更新结算金额。
- 删除商品: 提供删除商品的功能，让用户可以删除购物车中不需要的商品。
- 结算功能: 用户可以选择购物车中的商品进行结算，跳转至订单确认页面。
- 选择收货地址：用户可以选择自己想要的收货地址。
- 提交订单：用户可以选择购物车中的商品进行结算。
  
### 5.个人中心
- 个人信息管理: 用户可以在个人中心查看、编辑个人资料，包括昵称、头像等。
- 订单管理: 用户可以查看自己的订单列表，包括待付款、待发货、待收货、已完成、已取消等订单状态。
- 订单详情: 用户可以点击订单查看详情，包括订单商品、价格明细等。
- 地址管理：用户可以查看、修改、删除自己的收货地址列表。
  
## 1.3 计划和分工

### 开发计划
1.项目规划阶段：确定移动互联网的项目，确定人员分工和大致的功能。
2.界面设计阶段：设计APP的界面原型，并完善功能需求。
3.软件架构设计阶段：确定整体的技术方案和软件架构。
4.开发阶段：设计数据库，设计系统的API。后端进行接口开发，完成核心功能；前端开发APP界面，对接后端接口。
5.测试阶段：进行单元测试和集成测试，修复和优化Bug。
### 分工
- 姚若兰：负责项目后端架构设计、API设计、数据库设计、完整后端实现、系统测试和部署
- 薛若雨：负责项目需求分析、系统架构设计、数据搜集、界面原型设计、ppt制作以及文档整合。
- 夏紫微：负责项目前端架构设计、界面原型设计、完整前端实现。

# 二、界面原型设计 [夏紫微，薛若雨]

## 注册登录模块
![登录](image.png)
1.登录页面：
设计了验证码登录、密码登录、微信一键登录三种模式。如果登录成功后则跳转到首页，如果没有注册则点击立即注册按钮跳转到注册页面进行注册。
验证码登录需要输入手机号，点击发送验证码即可获取验证码。
密码登录需要输入手机号和密码进行登录。
微信一键登录需要点击按钮后跳转到微信来实现信息绑定。

2.注册页面：
未注册用户需要在此页面进行注册。需要在输入框中输入手机号，获取验证码，并且输入密码以及确认密码，在填写完信息后点击注册按钮进行注册，注册成功后跳转到用户登录的页面。

3.实现说明：
后端需要设计相应的接口接收用户注册和登录的请求，进行参数校验、用户验证等操作。
前端需要调用后端接口实现用户注册和登录功能，同时处理用户输入的数据并进行展示。
数据库需设计用户表存储用户信息，包括手机号码、密码等字段。

4.设计理念：
将用户注册和登录功能分开，有利于简化用户操作流程，提高用户体验。优点是采用密码进行登录验证，保障了账户的安全性，微信一键登录也更加便捷。缺点需要确保手机号的真实性，可能需要引入短信验证码等验证方式，增加了注册的复杂度。登录注册相关业务较为简单，但是微信一键登录页面的开发相对麻烦，涉及到用户信息安全，需要考虑密码加密存储、传输安全等问题

### 首页模块
![首页](首页.png)
1.首页：
分为三个模块：轮播广告，新品周边模块，活动模块。顶部是轮播图，展示最新产品、活动，底部是圆点导航栏。新品周边模块位于中部，展示一些新品周边的图片和名称。点击商品后会跳转到商品详情页。最底部是活动模块，展示当前活动图片，以及参与认识，点击立即参与按钮即可参加。

2.实现说明：
- 轮播广告：后端需要提供接口获取轮播广告的相关信息，包括图片链接、标题。前端通过调用后端接口获取轮播广告信息，并实现轮播功能。
- 新品周边模块：后端需要提供接口获取最新上架商品的信息，包括图片链接、名称、价格等。前端通过调用后端接口获取商品信息，并展示在页面上，同时处理用户点击事件并跳转至对应商品详情页面。

3.设计理念：
通过轮播广告、新品周边和活动模块，为用户提供丰富多彩的信息展示，吸引用户留在首页并探索更多内容。优点是设计简洁明了，操作便捷，用户可以快速找到所需信息，提升了用户体验。缺点是为保持首页信息的新鲜度，需要不断更新和维护轮播广告、新品周边和活动模块的内容，增加了运营成本。实现难度中等，涉及到前后端的协作和技术实现。

## 商城模块
![商城](商城.png)
1.商城页面
顶部是搜索框，点击后会跳转到搜索页面，搜索栏下是商品的分类，用户点击后会显示该分类下的商品。分类的下部是以网格形式展示的商品缩略图以及价格，用户可以点击需要的商品查看商品详情。
后端需提供接口获取商品列表信息，包括图片链接、名称、价格等。前端通过调用后端接口获取商品信息，并展示在页面上，同时处理用户点击事件点击商品跳转至对应商品详情页面，点击搜索栏跳转至搜索页面。

2.商品详情页面
展示商品的详细信息，有商品图片、商品的名称、价格、描述以及店家名称。如果用户想要购买该商品的话可以点击按钮把该商品加入到购物车中，或者点击立即购买按钮跳转到支付页面。
后端需要提供接口获取商品详情信息，包括图片链接、名称、价格、描述等。前端通过调用后端接口获取商品详情信息，并展示在页面上，同时处理用户点击事件将商品加入购物车和进入与客服聊天页面。

3.搜索页面
实现搜索功能，顶部是搜索栏，用户可以输入想要查找的商品的名称或者是idol的姓名等。在搜索栏下部是热门搜索，显示搜索频次较高的关键词。同时也会显示搜索历史。
后端提供接口根据用户输入的关键词返回相应的商品列表。前端接收用户输入的关键词，调用后端接口获取搜索结果并展示在页面上，同时处理用户点击事件并跳转至对应商品详情页面。

4.店铺详情页面
在商品详情页中点击店铺就会跳转到店铺详情页面。主要展示了店铺的主要信息、店铺内的商品，以及店铺动态。点击商品即可跳转到该商品的详情页面。
后端需要提供接口获取店铺的基本信息、热销商品列表以及店铺活动信息。前端通过调用后端接口获取店铺详情信息，并展示在页面上，同时处理用户点击事件并跳转至对应商品详情页面。

5.客服聊天页面
在商品详情页中点击客服即可实现跳转到咨询客服的页面，以对话框的形式和客服进行对话。
需要实现实时消息传输功能，可以借助即时通讯的技术来实现用户和客服之间的实时交流。

6.设计理念
旨在提供用户友好的购物体验，通过清晰的界面布局和便捷的操作流程，促进用户浏览和购买商品。用户可以快速找到所需信息，提升了用户体验。缺点是页面信息过于丰富，可能导致页面加载速度变慢，影响用户体验。后端需要设计相应的接口获取商品列表、商品详情和购物车的信息等等，同时前端需要处理这些信息的展示和用户操作，这部分涉及的接口较多，相对复杂一点。

## 购物车模块
![image](购物车.png)
1.购物车页面
购物车页面主要展示的是购物车内的商品列表，会展示商品名称、单价、缩略图，用户可以增加或者减少商品数量，同时会在下方显示购物车内商品总金额，用户也可点击全选框选中购物车内的所有商品。用户点击商品后会跳转到商品详情页，点击结算按钮会跳转到结算页面。
前端需要展示购物车中的商品列表，并提供修改商品数量、删除商品等交互功能。后端提供接口获取购物车商品列表、更新商品数量、删除商品以及计算总价等功能。结算时，前端将购物车信息提交给后端，并跳转到选择收货地址页面。

2.订单确认页面
进行订单确认，展示默认收货地址信息、订单信息（商品图片、名称、价格等信息）、价格，点击提交订单会跳转到支付页面。
前端请求用户地址信息、购物车商品信息等。后端返回相应数据，前端展示在页面上。用户点击“提交订单”时，前端收集表单信息，发送提交请求到后端。后端处理订单生成逻辑，扣减库存，生成订单记录，返回订单生成结果（成功或失败）。

3.选择收货地址页面
收货地址列表，会显示用户的详细收货信息如收货人姓名、联系电话、详细地址。用户需要选择一个收货地址。如需添加新的收货地址可以点击新增跳转到添加收货地址页面。
后端提供接口获取用户的收货地址列表，处理选择和添加新地址的请求。前端展示用户保存的收货地址列表，允许选择或添加新地址。选择地址后，将地址信息传递到订单确认页面。

4.添加收货地址页面
共有四个输入框，用户需要输入收货人姓名、电话、所在地区以及详细地址。可以点击按钮将其设置为默认收货地址。随后点击保存按钮，跳转到选择收货地址页面。
前端提供一个表单供用户输入收货地址信息，后端提供接口处理保存新的收货地址请求。

5.设计理念
主要模仿了常规购物app中购物车页面的设计，符合大多数人的购物需求，相对简洁美观。此部分也是idol商城的核心功能，涉及的接口较多，相对复杂一点。

## 个人中心模块
![个人](个人.png)
1.个人中心页面
展示用户的头像、昵称以及简介，点击顶部右侧的按钮跳转到个人信息编辑页面。下部是各个功能模块，如我的关注、我的收藏、我的订单以及地址管理，点击后会分别跳转至对应的页面。

2.关注店铺页面
列表展示用户关注的店铺信息，如店铺名、店铺内的主要商品图。点击店铺会跳转至店铺详情页面。
前端加载用户关注的店铺列表，后端提供获取和更新关注店铺的接口。

3.我的收藏页面
列表显示用户收藏的商品信息，如商品名字、图片、价格、店铺名等。
前端加载用户收藏的商品列表，后端提供获取和更新收藏商品的接口。

4.地址管理页面
收货地址列表，会显示用户的详细收货信息如收货人姓名、联系电话、详细地址。点击管理按钮可以对地址进行编辑。
前端展示用户保存的地址列表，后端提供获取、更新、删除和新增地址的接口。

5.个人信息页面
展示个人信息，如头像、id、昵称、性别、生日、个性签名等。可以进行编辑。
前端展示和提交用户基本信息，后端提供获取和更新个人信息的接口。

6.我的订单页面
列表显示用户的订单，有五个部分：全部订单、待付款订单、待发货订单、待收货订单、待评价订单，点击对应的文字即可显示对应的订单信息。
前端显示用户的订单列表，后端提供获取订单列表、更新订单状态的接口。

7.设计理念
将主要功能模块化（如个人中心、关注店铺、我的收藏、地址管理、个人信息、我的订单等），便于用户查找店铺、商品、订单等。功能模块多，需要合理优化页面加载速度和响应时间，特别是在数据量较大时。后端需要提供稳定、高效的数据接口，进行数据的增删改查操作。

## 消息模块
![消息](消息.png)
1.聊天页面
显示用户和客服的聊天列表，按照最近聊天时间排序，显示客服的头像和最后一次的聊天内容以及时间。点击对话框可跳转到与客服聊天的页面。
实时消息通过WebSocket或类似的实时通信协议实现。服务器端使用WebSocket或基于HTTP长连接的实时通信技术。聊天记录存储在数据库中，支持分页查询。

2.通知页面
显示通知列表，包括关注通知、物流消息、系统通知，按照最近发出通知的时间排序。
前端需要支持通知的实时推送，可以通过WebSocket或服务器推送技术实现。后端服务负责生成、存储和分发通知。实现通知的推送机制，例如基于WebSocket的实时推送或轮询机制。

3.设计原理
支持实时消息传递，提升用户互动体验，保障用户售后需求。缺点是实时消息传递需要稳定的WebSocket连接和后端的高并发处理能力。在后端实现部分有些许困难，需要处理高并发、实时通信、数据存储等多方面的问题。
# 三、系统架构设计 [薛若雨，姚若兰，夏紫微]

## 3.1 整体架构
![架构](架构.png)
1.前端：Android Studio。负责用户界面的展示和用户交互。通过发起HTTP请求调用后端接口请求。处理用户输入和交互反馈。
- 原因：Android平台广泛应用，适合移动设备上的应用开发。
- 优点：跨平台移动应用，用户体验良好。
- 缺点：可能受限于设备性能和网络状况，需要处理各种屏幕尺寸和分辨率的适配。
  
2.后端：Java语言，SpringBoot框架。提供接口供前端调用。并且处理前端请求，执行相应的业务逻辑，对数据库进行增删改查的操作。
- 原因：Java语言成熟稳定，适合企业级应用的开发；Spring Boot框架简化了项目配置与部署，提高了开发效率。
- 优点：Java语言跨平台性好，适合于各种服务器环境。Spring Boot简化了项目搭建与配置，提高了开发效率。
- 缺点：Java语言相比其他语言可能有更高的内存消耗。对于小型应用，Spring Boot可能会显得过于臃肿。

3.API：通过HTTP协议提供对外服务。接收并处理前端发送的请求。
调用后端业务逻辑处理，并返回处理结果。
- 优点：定义了前后端之间的通信标准，提高了系统的灵活性和可维护性。
- 缺点：如果设计不合理，可能导致接口冗余或不一致。

4.数据库：MySQL。存储数据，支持后端业务逻辑对数据的增删改查。
- 原因：关系型数据库具有事务支持、数据一致性等特性，适合需要保证数据完整性的应用场景。
- 优点：数据结构清晰，支持复杂的查询和关联操作。具有事务支持，能够保证数据一致性。
- 缺点：在大规模并发读写的情况下，性能可能会有限制。

## 3.2 前端模块：
前端包括了用户模块、商品展示模块、我的IDOL模块、购物车模块。
![前端](前端.png)
- 用户模块：包括了登录注册功能、显示和修改个人信息功能、个人中心里包括了查看我的收藏、订单管理和地址管理功能。这部分都和用户的信息相关，所以放在一起处理。
- 商品展示模块：类别指引、商品展示和商品详情。点击不同的类别会出现该类别下的商品列表，点击商品会跳转至该商品的商品详情页面，可以选择收藏、购买。加入购物车。
- 我的idol模块：我的IDOL模块包括了IDOL选择、轮播图、商品展示，你可以在IDOL选项中选择一个你喜欢的IDOl，这个页面就会显示这个IDOL的专属页面，包括它的轮播图合同热卖商品。
- 购物车模块：包括了商品选择、价格预算和提交订单。商品添加入购物车后，加减数量显示总金额，点击结算后跳转至结算界面，显示结算的商品信息。

## 3.3 后端模块：
后端主要分为用户模块、仓库模块、订单模块、商品模块、搜索模块、网关模块、公共模块七个模块，实现高内聚低耦合，提升系统的可维护性、可扩展性和可复用性。主要使用了Springboot作为基础框架，MyBatis进行数据持久化，帮助简化数据库的操作。

- 用户模块的登陆注册使用到了JWT验证，JWT在用户模块的登录注册中具有简单、安全、跨平台等优点，但也存在扩展性、撤销性和令牌大小等方面的缺点。

- 搜索模块的实现该模块主要处理商品的查询功能，使用了ElasticSearch技术进行全局搜索。ElasticSearch擅长处理复杂的全文搜索查询，能够在海量数据中快速找到匹配项，在面对高并发和大规模数据时，对ElasticSearch进行性能调优是一项挑战。

- 网关模块使用到了nacos注册中心和配置中心，Nacos提供了丰富的监控和告警功能，能够帮助网关及时发现问题并做出相应的调整，但也需要权衡其依赖性和性能影响。


# 四、API设计 [姚若兰]

API设计时主要分为了四个模块即user（用户）、product（商品）、order（订单）、warehouse（仓库）。四个模块对应四部分的业务功能，user模块主要负责用户登录注册、用户的信息管理、地址管理、收藏夹、购物车五大部分功能，product模块主要负责商品的展示、商品详情、商品查询功能，order部分主要负责创建订单、查询订单、购物车支付结算的功能，warehouse模块主要负责库存分配任务的功能。

本项目主要使用APIfox创建API，定义请求参数、响应结构等，并设置访问权限和版本控制等。在后端代码开发过程中，利用APIfox提供的测试工具，直接在平台上进行API测试。以下仅对各个模块的接口进行一个简单的介绍，具体的描述可以查看API文档。

## user模块
- 注册请求
- 登录请求
- 更新用户其他信息
- 选择idol
- 将地址修改为默认地址
- 添加新地址：
- 创建订单页面展示可选择的地址
- 修改地址
- 订单页选择地址/我的地址页面地址详情（编辑页面）
- 收藏商品
- 查看收藏夹
- 添加到购物车
- 购物车选中或者取消
- 查询购物车信息
- 增加或减少购物的数量

## product模块
- 根据spuid查询销售属性（点击购买时跳出的选择页面）
- 根据spuid查询spu相关信息（图片、标题、介绍、销量等）
- 根据选择的属性id和属性名查询是哪个skuid（前端需设计好选中所有属性时再发送请求，根据返回值实时更新图片）
- 根据idolId展示属于该爱豆的所有商品（分页内数据）
- 首页展示商品列表
- 查询idol列表选择
- 全局搜索
- 根据爱豆id查找其他的个性化照片

## order模块
- 点击立即购买创建订单
- 立即支付
- 查询待支付订单
- 查询待发货订单
- 查询已发货订单
- 查询已收货订单
- 查询所有订单
- 查看订单详情
- 为订单分配物流
- 购物车点击结算按钮
- 购物车点击立即支付
  
## warehouser模块
- 仓库分配任务

# 五、数据库设计 [薛若雨，姚若兰]

## 5.1 数据库方案
为了保证数据的一致性和完整性，此次所有数据均为持久化的数据。使用oss对象存储技术来存储图片，使用MySQL管理数据。

## 5.2 数据库详细设计
### 订单相关数据
1.oms_order表:
![order](order.png)
用于存储订单相关信息。用于保存订单的基本信息如订单id、订单号、订单创建时间、下单的用户名、下单的用户id等等；支付信息如订单总金额、运费金额、支付方式等；物流信息如物流公司、物流单号、收货人信息等；时间信息如支付时间、发货时间、确认收货时间等等。
此表保存的订单数据较多，id作为主键，使用了适当的数据类型，确保了数据的完整性和一致性。
2.oms_order_item表：
用于存储订单中的商品相关信息。其中包括订单号、订单id、商品spu属性部分信息如图片、id、名称等；商品sku属性部分信息如id、图片、价格、数量等。
此表用来存储订单中每个商品的详细信息，以id作为主键。实现了订单、商品、spu、sku等信息的关联查询。
3.oms_order_return_apply表：
用于存储退货申请订单的信息。其中包括退货人信息如退货人姓名、电话号码；退货商品的详细信息如订单编号、退款金额、退货商品的数量、退货商品的单价等等；以及退货状态、处理状态等信息。
4.oms_payment_info表：
用于存储支付信息。包括订单号、订单id、支付总金额、支付状态、支付时间等。
5.oms_refund_info表：
用于存储订单的退款情况。包括退款订单id、退款金额、退款状态、退款渠道、退款交易流水号、退款内容。

### 商品相关数据
![product](product.png)
在有关商品数据表的设计中采用了SPU、SKU的概念。

SPU是指标准产品单元，通常也被称为产品型号或产品单品，代表一个具体的商品，通常是指一种产品的款式、颜色、尺码等属性的组合，是对商品的逻辑分类，方便用户浏览和购买。

SKU是库存量单位，它是指库存管理的最小单位，是对具体库存商品的实际描述，通常包括了商品的唯一编码、条形码、价格、库存数量等信息。一个SPU可以包含多个SKU。

1.pms_sku_info表：
记录商品sku的基本信息，包括关联的spu和idol的id、sku的名称（商品的具体规格和型号）、sku的介绍描述（如材质、尺寸、颜色等）、sku的默认图片地址、sku的标题、价格、销量等等。
2.pms_spu_info表：
用于记录商品spu的基本信息，包括spu的名称（商品名称）、商品的描述、上架状态、商品介绍、商品信息的创建和更新时间、相关联idol的id。
3.pms_sku_sale_attr_value表：
记录商品SKU的销售属性及其取值，包括关联的sku的id、销售属性的id、销售属性名称（如颜色、尺寸等）、销售属性值（如红色、XL等）、属性顺序。
方便对商品进行多维度的描述和筛选。通过关联SKU信息表和销售属性表，可以构建商品的销售属性信息，让用户进行选择和查看。
4.pmu_spu_images表：
用于记录商品spu对应的图片信息，如图片存储路径、图片展示顺序、图片是否默认。
5.pmu_sku_image表：
用于记录商品sku对应的图片信息，如图片存储路径、图片展示顺序、图片是否默认。
6.idol_info表：
用于存储idol的基本信息。包括id、爱豆的姓名、简介以及图片链接。

### 用户相关数据
![user](user.png)
1.ums_user表：
用于存储用户的基本信息。主要有登录信息如手机号、邮箱、密码；个人资料如用户名、昵称、头像、性别、生日等等。
2.ums_user_collect_spu表：
用于记录用户收藏的商品信息，包括用户id、商品id（spuid）、收藏时间。
3.ums_member_receive_address表：
用于记录用户的收货地址信息，包括了收货人姓名、电话、邮政编码、详细地址等信息，default_status代表是否默认地址。

### 仓库相关数据
![warehouse](warehouse.png)
1.wms_ware_info表:
用于存储仓库信息，包括仓库名称、仓库地址、仓库编码。
2.wms_ware_order_task表:
用于存储仓库工作单信息，主要有付款方式、订单信息如订单id、订单编号、订单描述等；收货人信息如姓名、电话；物流信息如物流单号等等。
3.wms_ware_order_task_detail表:
用于存储库存工作单的详细信息。包括sku的id、sku的名称、购买sku的数量以及关联的工作单id。
4.wms_ware_sku表:
用于存储商品在仓库中的库存信息，包括skuid、仓库id、商品的实际库存数量、sku的名称、被锁定的库存数量。

## 5.3 相关技术
- oss对象存储：阿里云对象存储oss是阿里云提供的一种高可靠、安全、低成本的云端存储服务，非常适合存储非结构化数据，如视频、图形、日志、文本文件等等。同时提供多层安全机制，可以保障用户数据的安全性和隐私性。
本次采用了阿里云对象存储oss存储图片信息。首先在oss服务中创建一个存储空间（Bucket）。存储空间相当于一个顶级容器，用于存储和管理对象。随后获取访问密钥，接着将图片文件上传到存储空间中。
- Elasticsearch分布式搜索：Elasticsearch 是一个开源的分布式搜索和分析引擎，专为海量数据的实时搜索、分析和存储而设计。通常用于构建复杂的搜索引擎和大数据分析系统。本次使用Elasticsearch的查询DSL（Domain Specific Language）来构建全文搜索查询，通过Elasticsearch的API执行查询并获取结果。

# 六、Android端的实现 [夏紫微]
## 6.1 用户管理的实现
登录：使用 Jetpack Compose，用OutlinedTextField 用于输入手机号和密码，一个用于登录的按钮和一个用于注册的按钮，点击登录后与后端交互。

注册：使用 Jetpack Compose，用OutlinedTextField 用于输入用户名、手机号和密码，用于注册的按钮，点击注册后与后端交互，成功则提示并返回登录。

个人信息：调用接口从后端获取数据显示，修改后也提交至后端数据库中。

使用 Jetpack Compose构建布局，加入点击不同按钮载入不同的数据的逻辑，与后端交互获取数据展示即可。

## 6.2 商品模块的实现
使用 LazyRow 来横向显示商品类别，每个类别使用 TextButton 组件。当用户点击某个类别时，会调用 onCategory 回调函数，使用JSON与后端交互商品列表的图文及价格信息用 自定义的GoodsListScreen 显示商品列表。

点击列表中的商品进入商品详情，与后端交互获取商品信息通过Jetpack Compose设计的ui展示，点击不同的按钮（收藏、购买、加入购物车）会调用不同的函数方法处理来实现相关的功能。

## 6.3 搜索模块的实现
Compose 中创建一个搜索界面，包括搜索输入框和显示搜索结果的部分，使用 viewModel 中的 SearchViewModel 类来实现，该 ViewModel 类接受一个实现了 ISearchRepository 接口的对象作为构造函数参数。这个 repository 将用于执行实际的搜索操作。

# 七、商城APP后端的实现[姚若兰]

## 7.1 用户模块的实现
该模块实现的功能主要是登录和注册，其他实现的有：修改和查询个人信息，用户收藏夹功能，用户地址的相关操作，以及购物车的相关操作。其中用户注册登录使用的是JWT验证。

JWT 使用签名来验证数据完整性，确保 token 的安全性，缺点是一旦 JWT 被签发，就无法废除，除非等到 token 过期或者重新登录。

## 7.2 仓库模块的实现
该模块实现的功能主要有查看商品的库存，修改库存，以及订单的物流分配功能。

## 7.3 订单模块的实现
该模块分别实现了从商品详情页以及从购物车页面的购买创建订单和支付功能，该模块处理的数据	量庞大，实现起来很复杂容易漏掉一些数据的处理，以及远程调用涉及多个模块，所以开发起来花了一定的时间，同时该模块还支持我的页面里面的查询用户订单的功能，如分别从全部订单，待支付，待发货，待收货等多途径查询订单。

## 7.4 商品模块的实现
该模块是最主要的模块，用于查询商品的SPU和SKU信息，其中SPU是一个商品的主id，SKU是加上了销售属性的用户真正购买的商品id，同时在这个模块还能处理idol信息，每个商品都有所属的idol，还有商品销售属性的相关查询也都在这个模块进行处理。

## 7.5 搜索模块的实现
该模块主要处理商品的查询功能，使用了ElasticSearch技术进行全局搜索。

## 7.6 网关模块的实现
该模块主要用户让客户端直接访问统一网址，也就是网关gateway，让网关进行到每个服务的路由，同时还用到了nacos注册中心和配置中心，因为这是个分布式服务，因此需要使用到服务注册发现功能。
前面说到的ElasticSearch、mysql、以及nginx等都部署在Linux虚拟机中，使用的是centOS，nginx主要做了一个反向代理，先访问统一域名（实现在主机hosts文件中写好），发送到虚拟机nginx，然后由nginx映射到网关。具体实现中遇到了一些难题，如网关路由不能实现，域名映射出错等，后面也在努力解决，但还是有些错误，但目前已经暂时做到运行不出问题。

## 7.7 公共模块的实现
该模块主要用于放置一些公共类（比如一些远程调用的TO），还有一个统一返回的R类，该类封装了返回给前端的统一格式，其实这个模块最主要做的是导入了很多每个基础模块需要用到的类，其他的模块就可以都依赖这个模块，达到简化pom文件的目的，也更加方便管理。

# 八、系统测试

## 8.1 单元测试

通过配置Maven、JUnit和JaCoCo插件，编写的单元测试代码，并使用Maven命令运行测试。主要测试以下功能，如用户的注册登录、商品管理（增加、更新、删除等）、购物车管理（添加商品到购物车、从购物车移除商品、更新购物车商品数量等）、订单处理（下单、订单历史）等等。

## 8.2 集成测试

在测试环境中执行集成测试，使用JUnit框架的注解，指定集成测试运行期间所需的类，集成测试覆盖到了整个应用程序或系统，需要对模块、类、方法进行全面测试。

## 8.3 测试部署及结果

通过将项目代码托管到GitHub并使用GitHub Actions进行持续集成。

# 九、系统部署 [姚若兰]
系统部署方案：主要使用了虚拟机、docker来完成部署。虚拟机使用了centOS，将ElasticSearch、mysql以及nginx等都部署在centOS中，同时使用容器技术Docker，将应用程序及其所有依赖项打包成一个独立的容器，包含了应用程序运行所需的操作系统、库文件、配置，确保应用程序在不同的环境中具有一致的运行结果，避免了由于环境差异导致的问题。

自动部署方案（没有来得及实施）：根据需求选择合适的CI/CD工具，配置CI/CD流水线，编写构建脚本，随后编写测试脚本验证app的功能和性能，随后将app部署到目标环境中，配置触发器，使流水线在代码提交或定期基础上触发自动执行。


# 十、功能展示 [姚若兰、薛若雨、夏紫微]



# 十一、清单 [姚若兰、薛若雨、夏紫微]
- 前端代码: wx_class项目
- 后端代码: class_backend项目
- 原型设计文件: docs/design目录
- 项目演示视频: docs/videos目录

# 十二、总结 [姚若兰、薛若雨、夏紫微]
本次的项目我们小组选择做一个较新颖的爱豆商城APP。在项目的初期阶段我们先进行了需求分析和原型设计，确定了项目的前端架构以Android为主，后端以Springboot作为框架。

随后进行了API设计和数据库设计，由于前期想做一个购物商城APP和后台管理系统，所以均加入了仓库的模块（因为人手不够只有三个人，并且没有网页前端开发经验所以放弃）。

在前端和后端的开发过程中也遇到过难题，如网关路由不能实现，域名映射出错，前端后端对接有问题，但最终还是实现了爱豆商城的主要功能。

我们取消了最初设计的首页模块和消息模块，新增了我的idol模块（选择一个喜欢的idol，这个页面就展示专属idol）。没有完成后台管理系统是比较可惜的一点，下一步我们会将购物商城app做的更加完善、功能更加丰富，并且增加后台管理系统，让整个项目更加丰富。

# 十二、参考文献 [姚若兰、薛若雨、夏紫微]
- Elasticsearch使用教程: https://blog.csdn.net/wssb666666/article/details/125279558